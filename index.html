<!DOCTYPE html>
<html>
	<head>
		<script src="/cfw/wick"></script>
		<script src="/cfw/js"></script>
	</head>
	<body>
		<div id="a"></div>
		<div id="b"></div>
		<template id ="test">
			<div>
				
			<scope model="m">
				<input type=text value="((test))">
				((doug))
				<container>
					((doug))
					<scope>
						Hi! my name is ((name)).
					</scope>
				</container>
				((test))
				<script on=((test))>
					console.log(test);
				</script>
			</scope>
			</div>
		</template>
		<script type="text/javascript"> 
			async function start(){
			
			const m = wick.model({doug:[{name:"pate"}, {name:"mary"}]});
				
			class D extends wick{
				
				constructor(){
					super(`<scope><textarea value="((data))">temp</textarea>((output))<br/>((rendered))</scope>`, {models:{m}})
				}

				data(data){
					console.clear();
					const c = js.parse(data);
					output = JSON.stringify(c);
					rendered = c.render();
					console.dir(c)
				}
			}
				let a = new D;

				a.mount(document.getElementById("b"),{custom:js});


				(await wick(document.getElementById("test"), {models:{m}})).mount(document.getElementById("a"))
			}
			start();
		</script>
	</body>
</html>
